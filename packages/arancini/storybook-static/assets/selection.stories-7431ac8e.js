var k=Object.defineProperty;var v=(r,e,o)=>e in r?k(r,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[e]=o;var i=(r,e,o)=>(v(r,typeof e!="symbol"?e+"":e,o),o);import{g as C,j as t,F as p,m as D,a as y}from"./index.es-6456b573.js";import{b as E,V as u,u as L}from"./react-three-fiber.esm-dca5276d.js";import{r as h}from"./index-76fb7be0.js";import{S as w}from"./setup-1d901612.js";import{B as F,P}from"./Bounds-a89dda79.js";import"./_commonjsHelpers-de833af9.js";import"./extends-98964cd2.js";const N={title:"React / Selection"};class _ extends D{constructor(){super(...arguments);i(this,"selectedQuery",this.query(o=>o.has("selected","object3D")));i(this,"camera",this.singleton("camera",{required:!0}));i(this,"lerpedLookAt",new u(0,0,0))}onUpdate(o){const s=this.selectedQuery.entities.map(n=>n.object3D),c=new u(0,0,0);if(s.length>0){for(const n of s)c.add(n.position);c.divideScalar(s.length)}this.lerpedLookAt=this.lerpedLookAt.lerp(c,10*o),this.camera.lookAt(this.lerpedLookAt)}}const a=new C({components:["object3D","camera","selected"]});a.registerSystem(_);a.init();const{useCurrentEntity:B,Component:b,Entity:A}=E(a),O=r=>{const e=B(),[o,s]=h.useState(!1),[c,n]=h.useState(!1),j=()=>{e&&(e.selected?(a.remove(e,"selected"),s(!1)):(a.add(e,"selected",!0),s(!0)))};let m;return c?m=o?"#FFD580":"#999":m=o?"orange":"#555",t(b,{name:"object3D",children:y("mesh",{...r,onClick:j,onPointerOver:()=>n(!0),onPointerOut:()=>n(!1),children:[t("boxGeometry",{args:[1,1,1]}),t("meshStandardMaterial",{color:m})]})})},f=10,l=10,q=Array.from({length:f*l},(r,e)=>{const o=e%l-(l-1)/2,s=Math.floor(e/l)-(f-1)/2;return[o*1.5,s*1.5,0]}),M=()=>t(p,{children:q.map((r,e)=>t(A,{children:t(O,{position:r})},e))}),Q=()=>t(A,{children:t(b,{name:"camera",children:t(P,{makeDefault:!0,fov:30,position:[0,0,30]})})}),V=()=>(L((r,e)=>{a.step(e)}),y(p,{children:[t(Q,{}),t(F,{fit:!0,clip:!0,observe:!0,children:t(M,{})}),t("ambientLight",{intensity:1.5}),t("directionalLight",{intensity:3,position:[5,10,5]})]})),d=()=>t(p,{children:t(w,{controls:!1,lights:!1,children:t(V,{})})});var g,S,x;d.parameters={...d.parameters,docs:{...(g=d.parameters)==null?void 0:g.docs,source:{originalSource:`() => {
  return <>
      <Setup controls={false} lights={false}>
        <App />
      </Setup>
    </>;
}`,...(x=(S=d.parameters)==null?void 0:S.docs)==null?void 0:x.source}}};const T=["Example"];export{d as Example,T as __namedExportsOrder,N as default};
